1.进入娃娃机房间，用户处于观看状态，在娃娃机用户表添加一条记录，状态为观看，同时在娃娃机用户痕迹记录表也添加一条观看记录

2.同时，检查当前娃娃机的状态，如果是空闲，按钮为开始游戏，如果是正在使用，按钮则为预约。点击按钮，则将1中的娃娃机用户表中此用户的状态变更为相应的状态（更新操作）。同时在娃娃机用户痕迹记录表也添加一条对应类型的记录（新增）

3.用户点开始游戏后，开始倒计时，一局结束后，按钮变为继续游戏，同时倒计时，超时后，此用户的状态置为观看状态，通知后面排队的用户可以开始游戏。

4.
私信与消息是主从关系，消息为主表，私信为从表，新增私信记录之前，先检查是否存在双方的消息记录，没有则新增，有则更新


5.进入房间调用娃娃机详情接口(machinedetail.action)时，
返回机器的状态state(0空闲 1正在使用中)，决定按钮的状态（使用/预约），
返回用户在此机器上的状态 issubscribe（0观看 1已预约 2使用中 3一局结束后等待中）
如果 issubscribe=1时，给出用户当前排号 indexs （如果indexs=0时 给出是否开始游戏的倒计时 countdown） 
如果 issubscribe=3时，给出用户是否再来一局的倒计时countdown
如果 issubscribe=2时，给出游戏一局结束的倒计时countdown
